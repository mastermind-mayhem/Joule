{% extends "base.html" %}
{% block content %}
<h2>Recipes</h2>
<p>Browse and manage your recipe collection</p>

<div class="recipe-form">
    <h3>Add New Recipe</h3>
    <input type="text" id="recipe-name" placeholder="Recipe Name">
    <textarea id="recipe-ingredients" placeholder="Ingredients (one per line: item, quantity)&#10;Example:&#10;eggs, 3&#10;butter, 1 tbsp"></textarea>
    <textarea id="recipe-instructions" placeholder="Cooking Instructions"></textarea>
    <button onclick="addRecipe()" class="btn">Add Recipe</button>
</div>

<div class="recipes-list">
    {% for r in recipes %}
    <div class="recipe-card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h3 style="margin-bottom: 0;">{{ r.name }}</h3>
            <button onclick="deleteRecipe({{ r.id }}, '{{ r.name }}')" class="btn" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); padding: 0.5rem 1rem; font-size: 0.85rem;">Delete</button>
        </div>
        <div class="recipe-section">
            <h4>Ingredients:</h4>
            <ul class="ingredients-list">
                {% for ing in r.ingredients %}
                <li>{{ ing.item }} â€“ {{ ing.quantity }}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="recipe-section">
            <h4>Instructions:</h4>
            <p class="recipe-instructions">{{ r.instructions }}</p>
        </div>
    </div>
    {% endfor %}
</div>

<script>
function deleteRecipe(recipeId, recipeName) {
    if (!confirm(`Are you sure you want to delete "${recipeName}"?`)) {
        return;
    }
    
    fetch(`/api/delete-recipe/${recipeId}`, {
        method: 'DELETE'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            location.reload();
        }
    })
    .catch(error => console.error('Error:', error));
}
</script>

{% endblock %}